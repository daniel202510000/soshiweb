<!doctype html>
<html lang="es">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Sushi — Pedido</title>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="styles.css">
	<style>
	/* Small styles for address box & modal */
	.addr-box{display:flex;align-items:center;gap:8px;background:#fff;padding:6px 10px;border-radius:8px;border:1px solid #eef2f2}
	.addr-box .addr-text{max-width:240px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#334155;font-size:13px}
	.addr-edit{background:transparent;border:1px solid #e6e9e9;padding:6px 8px;border-radius:8px;cursor:pointer}
	/* modal */
	.addr-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(10,10,10,0.35);z-index:50}
	.addr-modal.open{display:flex}
	.addr-modal .panel{background:#fff;padding:16px;border-radius:10px;max-width:420px;width:92%;box-shadow:0 10px 30px rgba(2,6,23,0.25)}
	.addr-modal input[type="text"]{width:100%;padding:10px;border-radius:8px;border:1px solid #e6e9e9;margin-bottom:8px}
	.addr-modal .row{display:flex;gap:8px}
	.addr-modal .hint{font-size:13px;color:#6b7280;margin-bottom:8px}

	/* Product modal styles (nuevo) */
	.prod-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,0.45);z-index:60}
	.prod-modal.open{display:flex}
	.prod-modal .panel{background:#fff;border-radius:12px;max-width:720px;width:94%;display:flex;gap:16px;padding:16px;box-shadow:0 20px 40px rgba(2,6,23,0.25)}
	.prod-modal .left{flex:1;min-width:220px}
	.prod-modal .left img{width:100%;height:320px;object-fit:cover;border-radius:8px}
	.prod-modal .right{flex:1;display:flex;flex-direction:column;gap:10px}
	.prod-modal h3{margin:0}
	.prod-modal .desc{color:#6b7280;font-size:14px}
	.prod-modal .controls{display:flex;gap:8px;align-items:center}
	.prod-modal select, .prod-modal input[type="number"]{padding:8px;border-radius:8px;border:1px solid #e6e9e9}
	.prod-modal .price{font-weight:700;font-size:18px}
	.prod-modal .actions{display:flex;gap:8px;margin-top:8px}
	</style>
</head>
<body>
	<header class="site-header">
		<div class="brand">
			<img src="https://i.imgur.com/4YbX5Qm.png" alt="logo" class="logo">
			<h1>Suhsiii Sushi</h1>
		</div>
		<div class="header-actions">
			<input id="search" type="search" placeholder="Buscar sushi, roll..." />
			<button id="toggle-cart" class="cart-btn">Carrito (<span id="cart-count">0</span>)</button>

			<!-- { changed code }: address display & edit button -->
			<div id="addressBox" class="addr-box" title="Editar dirección">
				<div class="addr-text" id="addressText">Añadir dirección</div>
				<button id="editAddressBtn" class="addr-edit">Editar</button>
			</div>
		</div>
	</header>

	<main class="container">
		<section class="left-col">
			<!-- { changed code }: sección de Más vendidos -->
			<section>
				<h2>Más vendidos</h2>
				<div id="topProducts" class="products-grid">
					<!-- top 3 productos -->
				</div>
			</section>

			<section>
				<h2>Menú</h2>
				<div id="products" class="products-grid">
					<!-- tarjetas de productos -->
				</div>
			</section>
		</section>

		<aside id="cart" class="cart">
			<h2>Tu pedido</h2>
			<div id="cart-items" class="cart-items">
				<!-- items -->
			</div>
			<div class="cart-footer">
				<div class="total">Total: <span id="cart-total">0.00</span> €</div>
				<button id="clear-cart" class="secondary">Vaciar</button>
				<button id="checkout" class="primary">Pagar</button>
			</div>
		</aside>
	</main>

	<!-- { changed code }: address modal -->
	<div id="addrModal" class="addr-modal" aria-hidden="true">
		<div class="panel" role="dialog" aria-modal="true" aria-label="Editar dirección">
			<h3>Dirección de entrega</h3>
			<div class="hint">Introduce tu dirección manualmente o pulsa "Detectar ubicación" para autocompletar.</div>
			<input id="addrInput" type="text" placeholder="Calle, número, ciudad..." />
			<div class="row" style="margin-top:8px">
				<button id="detectBtn" class="primary">Detectar ubicación</button>
				<button id="saveAddrBtn" class="primary">Guardar</button>
				<button id="closeAddrBtn" class="secondary">Cerrar</button>
			</div>
			<div id="addrStatus" class="hint" style="margin-top:8px"></div>
		</div>
	</div>

	<!-- { changed code }: Product modal -->
	<div id="prodModal" class="prod-modal" aria-hidden="true">
		<div class="panel" role="dialog" aria-modal="true" aria-label="Detalle del producto">
			<div class="left">
				<img id="modalImage" src="https://i.imgur.com/8Km9tLL.png" alt="Producto">
			</div>
			<div class="right">
				<h3 id="modalTitle">Nombre producto</h3>
				<div class="desc" id="modalDesc">Descripción del producto...</div>
				<div class="price" id="modalPrice">0.00 €</div>

				<label for="modalProtein">Proteína</label>
				<select id="modalProtein">
					<!-- opciones dinámicas -->
				</select>

				<div class="controls">
					<label for="modalQty">Cantidad</label>
					<input id="modalQty" type="number" min="1" value="1" style="width:80px" />
					<div id="modalNote" style="color:#6b7280;font-size:13px;margin-left:8px"></div>
				</div>

				<div class="actions">
					<button id="modalAddBtn" class="primary">Agregar al carrito</button>
					<button id="modalCloseBtn" class="secondary">Cerrar</button>
				</div>
			</div>
		</div>
	</div>

	<script src="script.js" defer></script>
</body>
</html>
